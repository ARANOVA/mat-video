<div #player class="videoplayer" [ngClass]="getOverlayClass('show-mouse', 'hide-mouse')">
  <div class="header" *ngIf="title" [ngClass]="getOverlayClass('visible ' + headerClass, 'hidden')">
    {{ title }}
  </div>

  <div class="videoaspect">
    <video
      crossorigin="*"
      #video
      class="video"
      [attr.autoplay]="autoplay ? true : null"
      [preload]="preload ? 'auto' : 'metadata'"
      [attr.poster]="poster ? poster : null"
      [attr.loop]="loop ? loop : null"
      [attr.playsinline]="playsinline ? true : null"
    >
      <ng-content select="source"></ng-content>
      <ng-content select="track"></ng-content>
      This browser does not support HTML5 video.
    </video>
  </div>

  <div class="controls" *ngIf="videoLoaded" [ngClass]="getOverlayClass('visible ' + controlClass, 'hidden')">
    <div class="progress" [ngClass]="sliderClass">
      <mat-seek-progress-control
        [color]="color"
        [video]="video"
      ></mat-seek-progress-control>
    </div>

    <div class="menu">
      <div class="buttons">
        <mat-play-button
          (playChanged)="playing = $event; playingState = $event"
          [video]="video"
          [keyboard]="keyboard && !focused"
          [(play)]="playingState"
          [style.order]="orderConfiguration.playButton"
        > </mat-play-button>

        <mat-frame-by-frame-control
          *ngIf="showFrameByFrame"
          [video]="video"
          [fps]="fps"
          [keyboard]="keyboard && !focused"
          [style.order]="orderConfiguration.frameByFrameControl"
        ></mat-frame-by-frame-control>

        <mat-volume-control
          *ngIf="showVolume"
          [muted]="muted"
          (mutedChanged)="muted = $event; mutedChange.emit(muted)"
          [color]="color"
          [video]="video"
          [keyboard]="keyboard && !focused"
          [style.order]="orderConfiguration.volumeControl"
        >
        </mat-volume-control>

        <mat-time-control
          [video]="video"
          [style.order]="orderConfiguration.timeControl"
        ></mat-time-control>
        <mat-speed-control
          *ngIf="showSpeed"
          [video]="video"
          [keyboard]="keyboard && !focused"
          [speedScale]="speedScale"
          [speedIndex]="speedIndex"
          [style.order]="orderConfiguration.speedControl"
        ></mat-speed-control>
        <div style="flex: 1" [style.order]="orderConfiguration.spacer"></div>

        <mat-quality-control
          *ngIf="quality"
          [video]="video"
          [style.order]="orderConfiguration.qualityControl"
        ></mat-quality-control>

        <mat-download-button
          *ngIf="download"
          [title]="title"
          [video]="video"
          [style.order]="orderConfiguration.downloadButton"
        ></mat-download-button>

        <mat-fullscreen-button
          *ngIf="fullscreen"
          (fullscreenChanged)="isFullscreen = $event"
          [player]="player"
          [keyboard]="keyboard && !focused"
          [style.order]="orderConfiguration.fullscreenButton"
        ></mat-fullscreen-button>
      </div>
    </div>

    <div class="editor" *ngIf="editor">
      <mat-editor-control
        [color]="color"
        [video]="video"
        [cuts]="cuts"
        [marks]="marks"
        [fps]="fps"
        [keyboard]="keyboard && !focused"
        [currentTime]="time"
        [editorButtons]="editorButtons"
        [defaultCutType]="defaultCutType"
        [cutType]="cutType"
        [editorOrderButtons]="editorOrderButtons"
        [selected]="selected"
        [selectedMarker]="selectedMarker"
        [playCut]="playCut"
        (cutEvent)="emitCutEvent($event)"
        (posterChanged)="emitPosterChange($event)"
        (selectedChanged)="emitSelectedChange($event)"
        (focused)="emitFocus($event)"
        (selectedMarkChanged)="emitSelectedMarkChange($event)"
      ></mat-editor-control>
    </div>
  </div>

  <mat-video-spinner [spinner]="spinner" [video]="video"></mat-video-spinner>
</div>
